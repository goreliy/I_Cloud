# üéâ –§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª—å UserProfile
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `user_profiles` –≤ –ë–î
- ‚úÖ –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (one-to-one)
- ‚úÖ –ü–æ–ª—è: display_name, avatar_url, bio, website, location
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `002_add_user_profiles.py`

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤
- ‚úÖ –°–µ—Ä–≤–∏—Å `upload_service.py` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ñ–æ—Ä–º–∞—Ç, —Ä–∞–∑–º–µ—Ä)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π resize –¥–æ 300x300px
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `app/static/uploads/avatars/`
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2MB
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: JPG, PNG, GIF, WebP

### 3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –†–æ—É—Ç–µ—Ä `/settings`
- ‚úÖ –®–∞–±–ª–æ–Ω `settings.html`
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, –±–∏–æ, —Å–∞–π—Ç, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ

### 4. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- ‚úÖ –†–æ—É—Ç–µ—Ä `/settings/security`
- ‚úÖ –®–∞–±–ª–æ–Ω `settings_security.html`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (bcrypt)

### 5. –ù–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ Dropdown –º–µ–Ω—é —Å –∞–≤–∞—Ç–∞—Ä–æ–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ display_name –≤–º–µ—Å—Ç–æ email
- ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ú–æ–¥–µ–ª–∏:
- `app/models/user_profile.py`
- `alembic/versions/002_add_user_profiles.py`

### Schemas:
- `app/schemas/user_profile.py`

### –°–µ—Ä–≤–∏—Å—ã:
- `app/services/upload_service.py`

### –†–æ—É—Ç–µ—Ä—ã:
- `app/routers/settings.py`

### –®–∞–±–ª–æ–Ω—ã:
- `app/templates/settings.html`
- `app/templates/settings_security.html`

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Pillow==10.1.0 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- psutil==5.9.6 (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã)

---

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install Pillow==10.1.0 psutil==5.9.6
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
alembic upgrade head
```

–ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î:
```bash
rm thingspeak.db
python init_db.py
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
python run.py
```

### 4. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

- –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000
- –í–æ–π–¥–∏—Ç–µ: admin@example.com / admin123

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:**
1. –í –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ email ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä (–≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ display_name, bio, website, location
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–≤–∞—Ç–∞—Ä –ø–æ—è–≤–∏–ª—Å—è –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ display_name –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ email

**–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è:**
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
2. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å: admin123
3. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
5. –ù–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å"
6. –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞—Å—Ç—Å—è:

```
app/static/uploads/
‚îú‚îÄ‚îÄ avatars/           # –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ user_1_abc123.jpg
‚îî‚îÄ‚îÄ channels/          # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ (–±—É–¥—É—â–µ–µ)
```

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–°–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É, —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:

### –≠—Ç–∞–ø 2: –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤ (TODO)
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Channel (image_url, background_url, custom_css)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞–Ω–∞–ª–∞
- –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–Ω–∞–ª–∞

### –≠—Ç–∞–ø 3: Custom –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (TODO)
- –ú–æ–¥–µ–ª—å Visualization
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã (chart, gauge, map, table)
- –†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
- Custom HTML/CSS/JS

### –≠—Ç–∞–ø 4: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (TODO)
- RequestLog –º–æ–¥–µ–ª—å –∏ middleware
- Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏

### –≠—Ç–∞–ø 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (TODO)
- SystemStats –º–æ–¥–µ–ª—å
- Real-time –º–µ—Ç—Ä–∏–∫–∏
- API –∑–∞–ø—Ä–æ—Å—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–¥–∂–µ—Ç—ã

### –≠—Ç–∞–ø 6: Rate Limiting (TODO)
- Middleware rate limiter
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```
PIL.UnidentifiedImageError: cannot identify image file
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ –≤–∞–ª–∏–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPG, PNG, GIF)

### –û—à–∏–±–∫–∞ "No module named 'PIL'"

```bash
pip install Pillow
```

### –ü–∞–ø–∫–∞ uploads –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

–ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
mkdir -p app/static/uploads/avatars
mkdir -p app/static/uploads/channels
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
alembic current

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
rm thingspeak.db
python init_db.py
```

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (2MB –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π resize –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (UUID)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### User Experience
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞
- Success —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞
- Placeholder –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ –±—ç–∫–µ–Ω–¥–µ

### Performance
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (quality=85, optimize=True)
- Resize –¥–æ —Ä–∞–∑—É–º–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è RGBA ‚Üí RGB –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

**–§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ**

–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: ~2-3 —á–∞—Å–∞  
–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: 9  
–°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~800+  

–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º –ø–ª–∞–Ω–∞.





